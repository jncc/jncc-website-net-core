@using JNCC.PublicWebsite.Core.Models
@using JNCC.PublicWebsite.Core.ViewModels
@using Umbraco.Cms.Core.Models.Blocks
@model ArticlesContentItemSchemaSectionViewModel

@if (Model.Content?.Image != null)
{
    <article class="article @(Model.Content.ReadMoreButton != null ? "article-list" : "")">

        @if (Model.Content.Image?.Any() ?? false)
        {
            foreach (BlockListItem image in Model.Content.Image)
            {
                if (image.Content is ContentImageSchema mediaItem)
                {
                    if (mediaItem.Image?.Content is Image media && media != null)
                    {
                        var altText = media.AltText.IsNullOrWhiteSpace() ? media.Name : media.AltText;
                        <div class="img-holder">
                            <img src="@media.Url()" alt="@altText" title="@(media.TitleText)">
                        </div>
                    }
                }
            }

        }

        <div class="text-holder">
            @if(Model.Content.ReadMoreButton != null)
            {
                <h2><a href="@Model.Content.ReadMoreButton?.Url" target="@Model.Content.ReadMoreButton?.Target">@Model.Headline</a></h2>
            }
            else
            {
                <h2>@Model.Content.Headline</h2>
            }    
            @Html.Raw(Model.Content.Content)
        </div>
    </article>
}